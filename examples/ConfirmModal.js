(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.ConfirmModal=e()}})(function(){var e,t,n;return function(){function d(i,r,c){function l(n,e){if(!r[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(a)return a(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var s=r[n]={exports:{}};i[n][0].call(s.exports,function(e){var t=i[n][1][e];return l(t||e)},s,s.exports,d,i,r,c)}return r[n].exports}for(var a="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}return d}()({1:[function(e,t,n){"use strict";class o{constructor(){this.subscriptions={}}subscribe(e,t){this.subscriptions[e]=t}publish(e,t){if(this.subscriptions[e]){this.subscriptions[e](t)}}}class ConfirmModal{constructor(e){this.pubSub=new o;this.events={proceed:null,cancel:null};this._resolveOptions(e)}get promptvalue(){return this.prompt.value}set promptvalue(e){this.prompt.value=e}_resolveOptions(e={}){const t=e.id_prefix?e.id_prefix:"mm-confirmmodal";this.ids={btn_cancel:t+"-cancel",btn_proceed:t+"-proceed",container:t,overlay:t+"-overlay"};const n=e.cssclasses?e.cssclasses:{};this.cssclasses={btn_cancel:n.btn_cancel?n.btn_cancel:"btn btn-danger",btn_proceed:n.btn_proceed?n.btn_cancel:"btn btn-primary"};const o=e.messages||{};this.messages={title:o.title?o.title:"Confirm",desc:o.desc?o.desc:"",cancel:o.cancel?o.cancel:"Cancel",proceed:o.proceed?o.proceed:"Confirm"};this.callbacks={onProceed:typeof e.onProceed==="function"?e.onProceed:null,onCancel:typeof e.onCancel==="function"?e.onCancel:null};const s=e.buttons?e.buttons:{};this.buttons={cancel:typeof s.cancel==="boolean"?s.cancel:true,proceed:typeof s.proceed==="boolean"?s.proceed:true};const i=e.prompt?e.prompt:{};this.prompt={enabled:typeof i.enabled==="boolean"?i.enabled:false,required:typeof i.required==="boolean"?i.required:false,value:null}}open(){if(!document.getElementById(this.ids.container)){let e="";if(this.prompt.enabled){e="<form>";if(this.prompt.required)e+=`<textarea class='form-control' required></textarea>`;else e+=`<textarea class='form-control'></textarea>`;e+="</form>"}let t=document.createElement("div"),n=`<div id='${this.ids.container}'>
								<div id='${this.ids.container}-content'>
									<h2>${this.messages.title}</h2>
									<p>${this.messages.desc}</p>
									${e}
									<footer>`;if(this.buttons.cancel)n+=`<button class="${this.cssclasses.btn_cancel}" id="${this.ids.btn_cancel}">${this.messages.cancel}</button>`;if(this.buttons.proceed)n+=`<button class="${this.cssclasses.btn_proceed}" id="${this.ids.btn_proceed}">${this.messages.proceed}</button>`;n+=`						</footer>
								</div>
							  </div>`;t.innerHTML=n;document.body.appendChild(t);let o=document.createElement("div");o.innerHTML=`<div id='${this.ids.overlay}'></div>`;document.body.appendChild(o)}this.modalcontainer=document.getElementById(this.ids.container);this.modaloverlay=document.getElementById(this.ids.overlay);if(this.buttons.proceed){this.proceed=document.getElementById(this.ids.btn_proceed)}if(this.buttons.cancel){this.cancel=document.getElementById(this.ids.btn_cancel)}this._handlers();return this}on(t){if(["proceed","cancel"].indexOf(t)<0)return null;return new Promise(e=>{this.pubSub.subscribe(t,()=>{e(this)})})}_handlers(){function e(e){if(e=="onProceed"){if(this.prompt.enabled&&!document.querySelector(`#${this.ids.container} form`).checkValidity())return false;if(this.prompt.enabled)this.promptvalue=document.querySelector(`#${this.ids.container} form textarea`).value}if(this.callbacks[e])this.callbacks[e](this);if(e=="onProceed")this.pubSub.publish("proceed",this);else if(e=="onCancel")this.pubSub.publish("cancel",this);this.close()}if(this.buttons.proceed){this.proceed.onclick=e.bind(this,"onProceed")}if(this.buttons.cancel){this.cancel.onclick=e.bind(this,"onCancel")}}close(){if(!this.modalcontainer&&!this.modaloverlay){return new Error("Confirm Modal seems to be not opened")}this.modalcontainer.parentNode.removeChild(this.modalcontainer);this.modaloverlay.parentNode.removeChild(this.modaloverlay)}}t.exports=ConfirmModal},{}]},{},[1])(1)});